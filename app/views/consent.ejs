<div class="row">
    <div class="col">

        <form action="/customer/<%= customer.url_hash %>" method="post">

            <h1 class="text-center">Согласие</h1>

            <table border="0" width="100%">
                <tr>
                    <td>
                        <p>г. Самара</p>
                    </td>
                    <td>
                        <p class="text-right"><%= formatDate(date)%> г.</p>
                    </td>
                </tr>
            </table>

            <p>Я, <abbr class="customer-static" title="Изменить" tabindex="10"><%=
                     ([customer.surname, customer.name, customer.patronimic].filter(Boolean).join(' ')).trim()
                    %>,</abbr>
                <% if(!isSignMode){ %>
                    <span class="customer-edit form-inline d-none">
                        <input type="text" class="form-control form-control-sm my-1 " name="surname" disabled
                               tabindex="11" placeholder="Фамилия" value="<%=customer.surname%>"/>&nbsp;
                        <input type="text" class="form-control form-control-sm my-1" name="name" disabled
                               tabindex="12" placeholder="Имя" value="<%=customer.name%>"/>,&nbsp;
                    </span>
                <% } %>
                <%=genderify(customer.gender, 'имеющий', 'имеющая')%>
                в наличии
                <%- declension(ticketsTotals.count, "билет", "билета", "билетов") %>
                на&nbsp;мероприятия ООО «Н21&nbsp;Ивентс»,
                на&nbsp;сумму
                <%- formatMoney(ticketsTotals.sum, 0, 3, '&nbsp;', ',').trim() %>&nbsp;рублей,
                <%=genderify(customer.gender, 'согласен', 'согласна')%>
                на&nbsp;замену формата мероприятия для&nbsp;следующих билетов:</p>
            <ul>
            <% for (var i = 0; i < tickets.length;  i++ ) { let ticket = tickets[i] %>
                <li class="form-check">
                    <% if(!isSignMode){ %>
                    <input class="form-check-input ticket-checkbox" type="checkbox" name="ticket[]"
                           value="<%= ticket.id %>" id="ticket_check_<%=i%>" checked
                           data-amount="<%= ticket.amount %>"
                           tabindex="100<%=i%>">
                    <label class="form-check-label" for="ticket_check_<%=i%>">
                        билет <%=i+1%> (цена <%= ticket.amount %> руб.; заказ <%= ticket.order_number %> от
                        <%=formatDate(ticket.order_date) %>),
                    </label>
                    <% } else { %>
                        <label class="form-check-label">
                            заказ <%= ticket.order_number %> от
                            <%=formatDate(ticket.order_date) %> &mdash;
                            <%- declension(ticket.count, "билет", "билета", "билетов") %>
                            на сумму
                            <%- formatMoney(ticket.amount, 0, 3, '&nbsp;', ',').trim() %>&nbsp;рублей,
                        </label>
                    <% } %>
                </li>
            <% } %>
            <% if(!isSignMode){ %>
                <label class="bg-danger text-white px-2 message d-none">
                    Для подписания согласия вам нужно выбрать хотя&nbsp;бы один билет!
                </label>
            <% } %>
            </ul>
            <p>на&nbsp;общую сумму <span class="selected-amount text-nowrap"><%- formatMoney(ticketsTotals.sum, 0, 3, '&nbsp;', ',').trim() %></span>&nbsp;рублей.
                Претензий к&nbsp;ООО «Н21&nbsp;Ивентс» по поводу замены формата не&nbsp;имею.
            </p>
            <% if(!isSignMode){ %>
                <p class="text-center">
                    <button type="submit" class="btn btn-primary submit" tabindex="200<%=tickets.length+1%>">Подписать</button>
                </p>
            <% } else { %>
                <table border="0" width="100%">
                    <tr>
                        <td>
                            <p>Покупатель: <br/><br/>
                                <u>
                                    <%= ([customer.surname, customer.name, customer.patronimic].filter(Boolean).join(' ')).trim() %>
                                </u>
                            </p>
                        </td>
                        <td>
                            <p>Продавец: <br/><br/>
                                <u>
                                <%= consentSigner %>
                                </u>
                            </p>
                        </td>
                    </tr>
                </table>
                <p class="text-center" style="z-index: -1">
                    <img alt="" style="width:47mm; height:18mm" src="data:image/svg+xml;base64,77u/PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgOTYiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzJmNjljMiIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMiAyaDI0NnY5MkgyeiIgY2xhc3M9IlJlY3QiLz48ZyBmaWxsPSIjMmY2OWMyIiBhcmlhLWxhYmVsPSLQodC+0LPQu9Cw0YjQtdC90LjQtSDQv9C+0LTQv9C40YHQsNC90L4iIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+PHBhdGggZD0iTTE3IDIyLjVsMiAuNXEtLjYgMi42LTIuMyA0LTEuNyAxLjMtNC4xIDEuMy0yLjYgMC00LjItMS0xLjYtMS4xLTIuNC0zLS44LTItLjgtNC4zIDAtMi41LjktNC4zUTcgMTQgOC44IDEzcTEuNy0xIDMuOC0xIDIuNCAwIDQgMS4zIDEuNiAxLjIgMi4yIDMuNGwtMiAuNXEtLjYtMS44LTEuNi0yLjUtMS0uOC0yLjYtLjgtMS45IDAtMyAuOC0xLjMgMS0xLjggMi40dC0uNSAzcTAgMiAuNiAzLjV0MS44IDIuMnExLjMuOCAyLjcuOCAxLjcgMCAzLTEgMS4yLTEgMS42LTN6TTIwLjcgMjIuM3EwLTMuMiAxLjgtNC43IDEuNC0xLjMgMy41LTEuMyAyLjQgMCAzLjkgMS42IDEuNSAxLjUgMS41IDQuMiAwIDIuMi0uNyAzLjUtLjYgMS4zLTIgMi0xLjIuNy0yLjcuNy0yLjQgMC0zLjgtMS42LTEuNS0xLjUtMS41LTQuNHptMiAwcTAgMi4yIDEgMy4zLjkgMSAyLjMgMSAxLjUgMCAyLjQtMSAxLTEuMSAxLTMuNCAwLTItMS0zLjItMS0xLTIuNC0xdC0yLjQgMXEtMSAxLjEtMSAzLjN6TTMzLjcgMTYuNmg2LjV2MS42aC00LjZWMjhoLTJ6TTQyLjIgMTYuNmg5VjI4aC0ydi05LjhoLTUuMXY1LjdsLS4xIDIuNnEtLjIuNi0uNyAxLjEtLjYuNS0xLjcuNUw0MCAyOHYtMS42aC45bC44LS4xLjQtLjRWMjR6TTYxLjUgMjYuNnEtMSAxLTIgMS4zLTEgLjQtMi4yLjQtMS45IDAtMi45LTEtMS0uOS0xLTIuMyAwLS44LjQtMS41dDEtMS4ycS42LS40IDEuNC0uNmwxLjctLjMgMy41LS42di0uNXEwLTEuMi0uNi0xLjctLjctLjctMi4yLS43LTEuNCAwLTIgLjUtLjcuNS0xIDEuN2wtMS45LS4zcS4zLTEuMi45LTIgLjYtLjcgMS43LTEgMS4xLS41IDIuNi0uNXQyLjQuNHEuOS4zIDEuMy44LjQuNi42IDEuNGwuMSAxLjd2Mi42bC4xIDMuNC41IDEuNGgtMnEtLjMtLjYtLjQtMS40em0tLjEtNC4zcS0xLjEuNC0zLjIuN2wtMS43LjRxLS41LjItLjguNi0uMi40LS4yIDEgMCAuNy42IDEuMi41LjUgMS43LjUgMSAwIDItLjQuOC0uNSAxLjItMS40LjQtLjYuNC0yek02Ni40IDE2LjZoMnY5LjhoNC4zdi05LjhoMnY5LjhINzl2LTkuOEg4MVYyOEg2Ni40ek05MS44IDI0LjNsMiAuM3EtLjUgMS43LTEuOCAyLjctMS4yIDEtMy4yIDEtMi41IDAtNC0xLjYtMS41LTEuNS0xLjUtNC4zIDAtMi45IDEuNS00LjV0My45LTEuNnEyLjIgMCAzLjcgMS42IDEuNCAxLjUgMS40IDQuNHYuNWgtOC41cS4xIDEuOSAxIDIuOSAxIDEgMi41IDEgMSAwIDEuOC0uNi43LS41IDEuMi0xLjh6bS02LjQtMy4xaDYuNHEtLjEtMS40LS43LTIuMi0xLTEtMi40LTF0LTIuMy44cS0uOSAxLTEgMi40ek05Ni4yIDE2LjZoMnY0LjdoNS4zdi00LjdoMlYyOGgtMnYtNWgtNS4zdjVoLTJ6TTEwOC40IDE2LjZoMnY4LjdsNS4zLTguN2gyVjI4aC0xLjl2LTguNmwtNS4zIDguNmgtMi4xek0xMjguNSAyNC4zbDIgLjNxLS41IDEuNy0xLjggMi43LTEuMyAxLTMuMiAxLTIuNSAwLTQtMS42LTEuNS0xLjUtMS41LTQuMyAwLTIuOSAxLjUtNC41dDMuOS0xLjZxMi4yIDAgMy43IDEuNiAxLjQgMS41IDEuNCA0LjR2LjVIMTIycS4xIDEuOSAxIDIuOSAxIDEgMi41IDEgMSAwIDEuOC0uNi43LS41IDEuMi0xLjh6bS02LjQtMy4xaDYuNHEtLjEtMS40LS43LTIuMi0xLTEtMi40LTF0LTIuMy44cS0uOSAxLTEgMi40ek0xMzkgMTYuNmg5VjI4aC0xLjl2LTkuOEgxNDFWMjhoLTJ6TTE1MC4yIDIyLjNxMC0zLjIgMS44LTQuNyAxLjQtMS4zIDMuNi0xLjMgMi4zIDAgMy44IDEuNiAxLjUgMS41IDEuNSA0LjIgMCAyLjItLjcgMy41LS42IDEuMy0xLjkgMi0xLjMuNy0yLjcuNy0yLjQgMC00LTEuNi0xLjQtMS41LTEuNC00LjR6bTIgMHEwIDIuMiAxIDMuMy45IDEgMi40IDEgMS40IDAgMi4zLTEgMS0xLjEgMS0zLjQgMC0yLTEtMy4yLTEtMS0yLjMtMS0xLjUgMC0yLjUgMS0xIDEuMS0xIDMuM3pNMTY0LjIgMTYuNmg4djkuOGgxLjJ2NC44aC0xLjZWMjhoLTl2My4yaC0xLjZ2LTQuOGgxcTIuMS0yLjggMi05Ljh6bTEuNiAxLjZxLS4yIDUuNS0xLjcgOC4yaDYuMXYtOC4yek0xNzUuNiAxNi42aDlWMjhoLTJ2LTkuOGgtNS4xVjI4aC0yek0xODcuNCAxNi42aDJ2OC43bDUuMy04LjdoMi4xVjI4aC0ydi04LjZsLTUuMyA4LjZoLTJ6TTIwNy4yIDIzLjhsMS45LjNxLS4zIDItMS42IDMtMS4zIDEuMi0zLjIgMS4yLTIuMyAwLTMuNy0xLjYtMS41LTEuNS0xLjUtNC40IDAtMS44LjctMy4yLjYtMS40IDEuOC0yIDEuMy0uOCAyLjctLjggMS45IDAgMyAxIDEuMyAxIDEuNiAyLjZsLTEuOS4zcS0uMy0xLjEtMS0xLjctLjYtLjYtMS42LS42LTEuNCAwLTIuNCAxLS45IDEuMS0uOSAzLjR0MSAzLjNxLjggMSAyLjIgMSAxLjEgMCAyLS42LjctLjcuOS0yLjJ6TTIxOC4yIDI2LjZxLTEuMSAxLTIuMSAxLjMtMSAuNC0yLjEuNC0xLjkgMC0zLTEtMS0uOS0xLTIuMyAwLS44LjUtMS41LjMtLjcgMS0xLjIuNi0uNCAxLjMtLjZsMS44LS4zcTIuMy0uMyAzLjQtLjZ2LS41cTAtMS4yLS41LTEuNy0uOC0uNy0yLjItLjctMS40IDAtMiAuNS0uNy41LTEgMS43bC0xLjktLjNxLjMtMS4yLjktMiAuNi0uNyAxLjctMSAxLS41IDIuNi0uNSAxLjQgMCAyLjMuNCAxIC4zIDEuNC44LjQuNi42IDEuNHY0LjNxMCAyLjcuMiAzLjQuMS43LjUgMS40aC0ycS0uMy0uNi0uNC0xLjR6bS0uMi00LjNxLTEgLjQtMy4xLjdsLTEuNy40cS0uNS4yLS44LjYtLjMuNC0uMyAxIDAgLjcuNiAxLjJ0MS43LjVxMS4yIDAgMi0uNC45LS41IDEuMy0xLjQuMy0uNi4zLTJ6TTIyMyAxNi42aDJ2NC43aDUuM3YtNC43aDJWMjhoLTJ2LTVoLTUuNHY1aC0yek0yMzQuNCAyMi4zcTAtMy4yIDEuOC00LjcgMS41LTEuMyAzLjYtMS4zIDIuMyAwIDMuOCAxLjYgMS41IDEuNSAxLjUgNC4yIDAgMi4yLS43IDMuNS0uNiAxLjMtMS45IDItMS4yLjctMi43LjctMi40IDAtNC0xLjYtMS40LTEuNS0xLjQtNC40em0yIDBxMCAyLjIgMSAzLjMgMSAxIDIuNCAxdDIuNC0xcTEtMS4xIDEtMy40IDAtMi0xLTMuMi0xLTEtMi40LTEtMS41IDAtMi40IDEtMSAxLjEtMSAzLjN6Ii8+PC9nPjxnIGZpbGw9IiMyZjY5YzIiIGFyaWEtbGFiZWw9ItGN0LvQtdC60YLRgNC+0L3QvdC+0Lkg0YbQuNGE0YDQvtCy0L7QuSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj48cGF0aCBkPSJNMTAgNDguNFY1MGg0cS0uMiAxLjgtMSAyLjctLjcgMS0yLjEgMS0yLjUgMC0yLjktMi45bC0xLjkuM3EuMyAxLjkgMS42IDMgMS4yIDEuMiAzLjMgMS4yIDIuNC4xIDMuNy0xLjYgMS40LTEuNyAxLjMtNC40IDAtMi44LTEuNC00LjQtMS40LTEuNi0zLjgtMS42LTEuOSAwLTMgMS0xLjIgMS0xLjUgMi43bDEuOS4zcS41LTIuNCAyLjctMi40IDEuMyAwIDIuMSAxdDEgMi41ek0xOC44IDQzLjZoOVY1NWgtMnYtOS44aC01djUuN3EwIDItLjIgMi42LS4xLjYtLjcgMS4xLS42LjUtMS43LjVsLTEuNS0uMXYtMS42aC44bC45LS4xLjMtLjRWNTF6TTM4LjUgNTEuM2wyIC4zcS0uNSAxLjctMS43IDIuNy0xLjMgMS0zLjMgMS0yLjUgMC00LTEuNi0xLjUtMS41LTEuNS00LjMgMC0yLjkgMS41LTQuNXQzLjktMS42cTIuMyAwIDMuNyAxLjYgMS41IDEuNSAxLjUgNC40di41SDMycS4yIDEuOSAxLjEgMi45IDEgMSAyLjQgMSAxIDAgMS44LS42LjgtLjUgMS4yLTEuOHptLTYuMy0zLjFoNi4zcS0uMS0xLjQtLjctMi4yLTEtMS0yLjQtMS0xLjMgMC0yLjIuOC0xIDEtMSAyLjR6TTQzIDQzLjZoMS45djVxLjkgMCAxLjMtLjRsMS0ycS42LTEuNCAxLTEuOS4zLS40LjgtLjZsMS41LS4xaC40djEuNmgtLjZxLS43IDAtMSAuMi0uMi4yLS42IDEuNC0uNSAxLjEtLjkgMS42LS4zLjQtMSAuNyAxLjIuNCAyLjQgMi40bDIgMy41aC0yTDQ3IDUxLjVxLS42LTEuMS0xLjEtMS40LS41LS40LTEuMS0uNFY1NWgtMnpNNTEuOCA0My42SDYxdjEuNmgtMy43VjU1aC0ydi05LjhoLTMuNnpNNjMgNTkuNFY0My42aDEuN1Y0NXEuNi0uOSAxLjQtMS4zLjgtLjUgMS45LS41IDEuNSAwIDIuNi44IDEgLjcgMS43IDIuMS41IDEuNC41IDMgMCAxLjgtLjYgMy4yLS42IDEuNC0xLjggMi4xLTEuMi44LTIuNS44LTEgMC0xLjgtLjUtLjgtLjQtMS4yLTF2NS42em0xLjctMTBxMCAyLjIuOSAzLjJ0Mi4xIDFxMS4zIDAgMi4yLTEgMS0xLjEgMS0zLjQgMC0yLjItMS0zLjMtLjgtMS0yLTEtMS4zIDAtMi4zIDEuMS0xIDEuMi0xIDMuNHpNNzQuNCA0OS4zcTAtMy4yIDEuOC00LjcgMS41LTEuMyAzLjYtMS4zIDIuMyAwIDMuOCAxLjYgMS41IDEuNSAxLjUgNC4yIDAgMi4yLS42IDMuNS0uNyAxLjMtMiAyLTEuMi43LTIuNy43LTIuNCAwLTMuOS0xLjYtMS41LTEuNS0xLjUtNC40em0yIDBxMCAyLjIgMSAzLjMgMSAxIDIuNCAxdDIuNC0xcTEtMS4xIDEtMy40IDAtMi0xLTMuMi0xLTEtMi40LTEtMS41IDAtMi40IDEtMSAxLjEtMSAzLjN6TTg3LjQgNDMuNmgydjQuN2g1LjN2LTQuN2gyVjU1aC0ydi01aC01LjN2NWgtMnpNOTkuNiA0My42aDJ2NC43aDUuM3YtNC43aDJWNTVoLTJ2LTVoLTUuNHY1aC0yek0xMTEgNDkuM3EwLTMuMiAxLjgtNC43IDEuNC0xLjMgMy42LTEuMyAyLjMgMCAzLjggMS42IDEuNSAxLjUgMS41IDQuMiAwIDIuMi0uNyAzLjUtLjYgMS4zLTEuOSAyLTEuMi43LTIuNy43LTIuNCAwLTQtMS42LTEuNC0xLjUtMS40LTQuNHptMiAwcTAgMi4yIDEgMy4zIDEgMSAyLjQgMXQyLjQtMXExLTEuMSAxLTMuNCAwLTItMS0zLjItMS0xLTIuNC0xLTEuNSAwLTIuNCAxLTEgMS4xLTEgMy4zek0xMjQgNDMuNmgydjguN2w1LjMtOC43aDJWNTVoLTEuOXYtOC42bC01LjMgOC42SDEyNHptNi43LTQuM2gxLjNxLS4xIDEuMy0xIDItLjguOC0yLjIuOC0xLjMgMC0yLjItLjgtLjgtLjctMS0yaDEuNHEuMS43LjYgMSAuNC40IDEuMi40LjkgMCAxLjMtLjMuNC0uNC42LTEuMXpNMTQyLjQgNDMuNmgydjkuOGg1LjN2LTkuOGgydjkuOGgxLjJ2NC44aC0xLjZWNTVoLTguOXpNMTU1IDQzLjZoMS45djguN2w1LjQtOC43aDJWNTVoLTEuOXYtOC42TDE1NyA1NWgtMnpNMTczLjkgMzkuM2gydjUuNHEuNS0uNyAxLjItMSAuOC0uNCAxLjYtLjQgMiAwIDMuMiAxLjcgMS4yIDEuNyAxLjIgNC4zIDAgMi43LTEuMyA0LjMtMS4zIDEuNy0zLjIgMS43bC0xLjItLjJxLS43LS4yLTEuNi0xdjUuM2gtMlY1NHEtLjUuNi0xLjIgMS0uNy4zLTEuNS4zLTEuOCAwLTMuMi0xLjYtMS4zLTEuNi0xLjMtNC41IDAtMi41IDEuMi00LjIgMS4yLTEuNyAzLjMtMS43LjggMCAxLjUuNC43LjMgMS4zIDF6bTIgMTBxMCAyLjYuNiAzLjUuNy45IDEuOC45IDEuMiAwIDItMS4xLjgtMSAuOC0zLjQgMC0yLjItLjctMy4yLS44LTEtMi0xLTEuMyAwLTIgMS0uNiAxLjEtLjYgMy4zem0tNy4zLS4ycTAgMi40LjggMy41LjggMSAyIDEgMS4zIDAgMS45LTEgLjYtMSAuNi0zLjJ0LS43LTMuM3EtLjYtMS4yLTItMS4yLTEuMSAwLTEuOSAxLjEtLjcgMS4xLS43IDMuMXpNMTg1LjMgNTkuNFY0My42aDEuOFY0NXEuNi0uOSAxLjQtMS4zLjgtLjUgMi0uNSAxLjQgMCAyLjUuOCAxLjEuNyAxLjcgMi4xLjUgMS40LjUgMyAwIDEuOC0uNiAzLjItLjYgMS40LTEuOCAyLjEtMS4yLjgtMi41LjgtMSAwLTEuOC0uNS0uNy0uNC0xLjItMXY1LjZ6bTEuOC0xMHEwIDIuMi45IDMuMnQyLjEgMXExLjMgMCAyLjItMSAxLTEuMSAxLTMuNCAwLTIuMi0xLTMuMy0uOC0xLTItMS0xLjMgMC0yLjMgMS4xLTEgMS4yLTEgMy40ek0xOTYuOSA0OS4zcTAtMy4yIDEuNy00LjcgMS41LTEuMyAzLjYtMS4zIDIuNCAwIDMuOSAxLjYgMS41IDEuNSAxLjUgNC4yIDAgMi4yLS43IDMuNS0uNyAxLjMtMiAyLTEuMi43LTIuNy43LTIuNCAwLTMuOS0xLjYtMS40LTEuNS0xLjQtNC40em0yIDBxMCAyLjIgMSAzLjMuOSAxIDIuMyAxIDEuNSAwIDIuNC0xIDEtMS4xIDEtMy40IDAtMi0xLTMuMi0xLTEtMi40LTF0LTIuNCAxcS0xIDEuMS0xIDMuM3pNMjA5LjggNDMuNmg0LjVxMS42IDAgMi40LjMuOC4yIDEuNCAxIC42LjcuNiAxLjcgMCAuOC0uNCAxLjQtLjMuNy0xIDEgLjguMyAxLjQgMSAuNS44LjUgMS44LS4xIDEuNi0xLjIgMi40LTEgLjgtMyAuOGgtNS4yem0yIDQuOGgybDEuNy0uMXEuNS0uMi45LS42LjMtLjMuMy0uOSAwLS45LS42LTEuMy0uNy0uMy0yLjItLjNoLTIuMXptMCA1aDIuNXExLjcgMCAyLjMtLjQuNi0uNC42LTEuMyAwLS41LS4zLTEtLjQtLjUtMS0uNmwtMS44LS4xaC0yLjN6TTIyMC41IDQ5LjNxMC0zLjIgMS44LTQuNyAxLjUtMS4zIDMuNi0xLjMgMi4zIDAgMy44IDEuNiAxLjUgMS41IDEuNSA0LjIgMCAyLjItLjYgMy41LS43IDEuMy0yIDItMS4yLjctMi43LjctMi40IDAtMy45LTEuNi0xLjUtMS41LTEuNS00LjR6bTIgMHEwIDIuMiAxIDMuMyAxIDEgMi40IDF0Mi40LTFxMS0xLjEgMS0zLjQgMC0yLTEtMy4yLTEtMS0yLjQtMS0xLjUgMC0yLjQgMS0xIDEuMS0xIDMuM3pNMjMzLjUgNDMuNmgydjguN2w1LjMtOC43aDJWNTVIMjQxdi04LjZsLTUuNCA4LjZoLTJ6bTYuNy00LjNoMS4zcS0uMSAxLjMtMSAyLS44LjgtMi4xLjgtMS40IDAtMi4yLS44LS44LS43LTEtMmgxLjNxLjIuNy42IDEgLjUuNCAxLjIuNC45IDAgMS4zLS4zLjUtLjQuNi0xLjF6Ii8+PC9nPjxnIGZpbGw9IiMyZjY5YzIiIGFyaWEtbGFiZWw9ItC/0L7QtNC/0LjRgdGM0Y4iIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+PHBhdGggZD0iTTc2LjYgNjcuNmg5Vjc5aC0ydi05LjhoLTVWNzloLTJ6TTg3LjggNzMuM3EwLTMuMiAxLjgtNC43IDEuNC0xLjMgMy41LTEuMyAyLjQgMCAzLjkgMS42IDEuNSAxLjUgMS41IDQuMiAwIDIuMi0uNyAzLjUtLjYgMS4zLTIgMi0xLjIuNy0yLjcuNy0yLjQgMC0zLjgtMS42LTEuNS0xLjUtMS41LTQuNHptMiAwcTAgMi4yIDEgMy4zLjkgMSAyLjMgMSAxLjUgMCAyLjQtMSAxLTEuMSAxLTMuNCAwLTItMS0zLjItMS0xLTIuNC0xdC0yLjQgMXEtMSAxLjEtMSAzLjN6TTEwMS44IDY3LjZoOHY5LjhoMS4ydjQuOGgtMS42Vjc5aC05djMuMmgtMS42di00LjhoMXEyLTIuOCAyLTkuOHptMS42IDEuNnEtLjIgNS41LTEuNyA4LjJoNi4xdi04LjJ6TTExMy4xIDY3LjZoOVY3OWgtMS45di05LjhoLTUuMVY3OWgtMnpNMTI1IDY3LjZoMnY4LjdsNS4zLTguN2gyLjFWNzloLTJ2LTguNmwtNS4zIDguNmgtMnpNMTQ0LjggNzQuOGwxLjkuM3EtLjMgMi0xLjYgMy0xLjMgMS4yLTMuMiAxLjItMi4zIDAtMy44LTEuNi0xLjQtMS41LTEuNC00LjQgMC0xLjguNi0zLjIuNy0xLjQgMS45LTIgMS4zLS44IDIuNy0uOCAxLjkgMCAzIDEgMS4zIDEgMS42IDIuNmwtMS45LjNxLS4zLTEuMS0xLTEuNy0uNi0uNi0xLjYtLjYtMS41IDAtMi40IDEtLjkgMS4xLS45IDMuNHQuOSAzLjNxLjkgMSAyLjMgMSAxLjEgMCAxLjktLjYuOC0uNyAxLTIuMnpNMTQ4LjMgNjcuNmgyVjcyaDIuNHEyLjQgMCAzLjcgMSAxLjMgMSAxLjMgMi41dC0xLjEgMi41cS0xLjEgMS0zLjUgMWgtNC44em0yIDkuOGgycTEuOCAwIDIuNi0uNC44LS41LjgtMS40IDAtLjgtLjYtMS40LS42LS41LTIuNi0uNWgtMi4zek0xNTkuOCA2Ny42aDJ2NC44aDIuM3EuMi0yLjUgMS41LTMuOCAxLjMtMS4zIDMuMy0xLjMgMS44IDAgMi44LjcgMSAuNyAxLjYgMiAuNyAxLjIuNyAzLjMgMCAzLTEuNCA0LjQtMS4zIDEuNi0zLjYgMS42LTIuMiAwLTMuNS0xLjUtMS4yLTEuNC0xLjQtMy44aC0yLjR2NWgtMS45ek0xNjkgNjlxLTEuNCAwLTIuMiAxLS44IDEuMi0uOCAzLjEgMCAyLjQuOCAzLjUuOCAxIDIuMiAxIDEuMyAwIDIuMS0xIC45LTEgLjktMy4ydC0uOC0zLjNxLS43LTEuMS0yLjItMS4xeiIvPjwvZz48L3N2Zz4=" />
                </p>
            <% } %>
        </form>
    </div>
</div>
<% if(!isSignMode) { %>
    <script>
        function recalc() {
            var total_amount = 0;
            var checked_tickets = document.querySelectorAll('.ticket-checkbox:checked');
            for (var i = 0; i < checked_tickets.length; i++) {
                total_amount += checked_tickets[i].getAttribute('data-amount') * 1;
            }
            document.querySelector('.selected-amount').innerText = formatMoney(total_amount, 0, 3, ' ', ',').trim();
            if (total_amount > 0) {
                addClass(document.querySelector('.message'), 'd-none');
                document.querySelector('.submit').removeAttribute('disabled');
            } else {
                removeClass(document.querySelector('.message'), 'd-none');
                document.querySelector('.submit').setAttribute('disabled', 'disabled');
            }
        }

        function initEditor() {
            var customerStatic = document.querySelector('.customer-static');
            var customerEdit = document.querySelector('.customer-edit');
            addEventListener(customerStatic, 'click', function () {
                addClass(customerStatic, 'd-none');
                removeClass(customerEdit, 'd-none');
                addClass(customerEdit, 'd-inline-block');
                var inputs = customerEdit.querySelectorAll('input');
                for (var i = 0; i < inputs.length; i++) {
                    inputs[i].removeAttribute('disabled');
                }
            });
        }

        function init() {
            var inputs = document.querySelectorAll('.ticket-checkbox');
            for (var i = 0; i < inputs.length; i++) {
                addEventListener(inputs[i], 'change', recalc);
            }
            initEditor();
        }

        ready(init);
    </script>
<% } %>
